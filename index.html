<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üåæ DNX FARM ULTRA++</title>

<!-- ‚úÖ ‡πÉ‡∏ä‡πâ Cloudflare CDN ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£ -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"
integrity="sha512-T7Lg4J3BQp0HCD+Xmv7U7D+9Z8USfMVbQuH4g8U/ToCPqv98m1wX4G1B6cUGxOhzTX/ZRvMfXlywW2aVh4Vh0A=="
crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<style>
:root{--gold:#ffd700;--neon:#00ffd5}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;overflow-x:hidden;font-family:"Poppins","Noto Sans Thai",sans-serif;background:radial-gradient(circle at top,#000 40%,#111 100%);color:#fff}
header{position:fixed;top:0;left:0;right:0;z-index:20;display:grid;grid-template-columns:1fr auto 1fr;align-items:center;padding:10px;background:linear-gradient(90deg,#111,#222,#111);border-bottom:2px solid var(--gold)}
button{border:none;font-weight:700;cursor:pointer;transition:.15s}
button:hover{transform:translateY(-1px)}
#langToggle{background:rgba(0,0,0,.6);border:1px solid var(--gold);color:var(--gold);padding:6px 10px;border-radius:10px}
#claimFreeTop{background:linear-gradient(90deg,#00ffd5,#00c8a7);color:#000;padding:6px 12px;border-radius:14px;font-size:13px}
#connectBtn{background:linear-gradient(90deg,#ffd700,#ff9d00);color:#000;padding:8px 14px;border-radius:14px}
.divider{margin-top:52px;border:0;height:1px;background:linear-gradient(90deg,transparent,var(--gold),transparent)}
#refreshSmall{display:block;margin:10px auto;background:#1a1a1a;color:#ddd;border:1px solid #3ad8c8;border-radius:10px;padding:6px 12px;font-size:13px;transition:0.2s}
#refreshSmall:active{background:#00ffd5;color:#000;transform:scale(0.96)}
#logo{position:fixed;top:80px;left:16px;width:80px;height:80px;border-radius:50%;background:url('dnx_logo.png') center/cover no-repeat;box-shadow:0 0 20px rgba(255,215,0,.6);animation:spin 12s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
main{text-align:center;margin-top:150px}
h1{color:var(--gold);font-size:2rem;text-shadow:0 0 25px rgba(255,215,0,.7)}
.marquee{white-space:nowrap;overflow:hidden;width:90%;margin:10px auto}
.marquee span{display:inline-block;padding-left:100%;animation:scroll 12s linear infinite;color:#00ffd5;font-size:1rem}
@keyframes scroll{to{transform:translate(-100%,0)}}
.card{background:rgba(0,0,0,.7);border:2px solid var(--gold);border-radius:16px;box-shadow:0 0 25px rgba(255,215,0,.3);padding:20px;width:min(95%,600px);margin:auto}
.stats{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-bottom:10px}
.stat{background:rgba(255,255,255,.05);border:1px solid var(--neon);border-radius:10px;padding:10px}
.stat .label{font-size:13px;opacity:.8}
.stat .value{font-weight:800;color:var(--gold)}
#pendingUSD{font-size:12px;color:#aaa}
input{width:80%;padding:10px;margin:10px 0;border-radius:10px;border:1px solid var(--neon);background:#000;color:#00ffd5;text-align:center}
.action{border:none;border-radius:10px;padding:10px 16px;margin:5px;font-weight:800;cursor:pointer}
.btn{background:linear-gradient(90deg,#00ffd5,#00c8a7);color:#000}
.gold{background:linear-gradient(90deg,#ffd700,#ff9d00);color:#000}
footer{margin-top:14px;color:#888;font-size:14px}
</style>
</head>

<body>
<header>
  <div><button id="langToggle">EN</button></div>
  <div><button id="claimFreeTop">üéÅ Claim 500 DNX ‡∏ü‡∏£‡∏µ</button></div>
  <div><button id="connectBtn">üîó ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤</button></div>
</header>

<hr class="divider"/>
<button id="refreshSmall">üîÑ Refresh</button>
<div id="logo"></div>

<main>
  <h1>üåæ DNX FARM ULTRA++</h1>
  <div class="marquee"><span>‡∏£‡∏∞‡∏ö‡∏ö‡∏ü‡∏≤‡∏£‡πå‡∏°‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏à‡∏≤‡∏Å‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç Dynamix</span></div>

  <div class="card">
    <div class="stats">
      <div class="stat"><div class="label" id="lblWallet">‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤</div><div id="waddr" class="value">‚Äî</div></div>
      <div class="stat"><div class="label" id="lblBal">‡∏¢‡∏≠‡∏î DNX ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div><div id="bal" class="value">‚Äî</div></div>
      <div class="stat"><div class="label" id="lblStake">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Stake</div><div id="staked" class="value">‚Äî</div></div>
      <div class="stat"><div class="label" id="lblReward">‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏Ñ‡πâ‡∏≤‡∏á‡∏£‡∏±‡∏ö</div><div id="pending" class="value">‚Äî</div><div id="pendingUSD">‚âà ‚Äî USD</div></div>
    </div>

    <input id="amount" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô DNX"/>
    <div><button id="deposit" class="action btn">üí∞ ‡∏ù‡∏≤‡∏Å (Deposit)</button><button id="withdraw" class="action btn">üíé ‡∏ñ‡∏≠‡∏ô (Withdraw)</button></div>
    <div><button id="claim" class="action gold">üéÅ ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• (Claim)</button><button id="buyDNX" class="action gold">üõí BUY DNX</button></div>
    <footer>Powered by <b>DNX Finance</b> ¬© 2025</footer>
  </div>
</main>

<script>
const TOKEN="0x7DB860CC9D7f64Ed1B39de6621ebc94440C8dc62"; // ‚úÖ DNX
const CHEF="0x9D9649e1710eF013465C34146874F967EEE73B03";   // ‚úÖ DNX MasterChef
const PANCAKE_API="https://api.pancakeswap.info/api/v2/tokens/"+TOKEN;

const ABIchef=[
 "function deposit(uint256) external",
 "function withdraw(uint256) external",
 "function userInfo(address) view returns(uint256 amount,uint256 rewardDebt)",
 "function pendingReward(address) view returns(uint256)",
 "function rewardPerBlock() view returns(uint256)"
];
const ABItoken=[
 "function balanceOf(address) view returns(uint256)",
 "function decimals() view returns(uint8)",
 "function allowance(address,address) view returns(uint256)",
 "function approve(address,uint256) returns(bool)"
];

const $=id=>document.getElementById(id);
const fmt=(bn,dec=18)=>{try{return parseFloat(ethers.utils.formatUnits(bn,dec)).toFixed(2)}catch{return "0.00"}};
let provider,signer,user,token,chef,dec=18,priceUSD=0;

function showMsg(msg,color="gold"){
 let box=$("msgBox");
 if(!box){
  box=document.createElement("div");
  Object.assign(box.style,{position:"fixed",bottom:"15px",left:"50%",transform:"translateX(-50%)",padding:"10px 18px",background:"#111",color:color,border:"1px solid "+color,borderRadius:"10px",fontFamily:"Poppins,sans-serif",zIndex:"9999"});
  box.id="msgBox";document.body.appendChild(box);
 }
 box.textContent=msg;setTimeout(()=>box.remove(),2000);
}

let lang=localStorage.getItem("DNX_LANG")||"TH";
const text={TH:{toggle:"EN",connect:"üîó ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤",wallet:"‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤",total:"‡∏¢‡∏≠‡∏î DNX ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",stake:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Stake",reward:"‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏Ñ‡πâ‡∏≤‡∏á‡∏£‡∏±‡∏ö",needConnect:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡∏Å‡πà‡∏≠‡∏ô"},
EN:{toggle:"TH",connect:"üîó Connect Wallet",wallet:"Wallet",total:"Total DNX",stake:"Your Stake",reward:"Pending Rewards",needConnect:"Please connect wallet first"}};
function applyLang(){const L=text[lang];$("langToggle").textContent=L.toggle;$("connectBtn").textContent=L.connect;$("lblWallet").textContent=L.wallet;$("lblBal").textContent=L.total;$("lblStake").textContent=L.stake;$("lblReward").textContent=L.reward;}
$("langToggle").onclick=()=>{lang=(lang==="TH")?"EN":"TH";localStorage.setItem("DNX_LANG",lang);applyLang();};
applyLang();

async function connect(){
 if(!window.ethereum)return showMsg("‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏µ MetaMask","red");
 try{
 const acc=await ethereum.request({method:"eth_requestAccounts"});
 user=acc[0];
 provider=new ethers.providers.Web3Provider(window.ethereum);
 signer=provider.getSigner();
 token=new ethers.Contract(TOKEN,ABItoken,signer);
 chef=new ethers.Contract(CHEF,ABIchef,signer);
 dec=await token.decimals();
 $("waddr").textContent=user.slice(0,6)+"..."+user.slice(-4);
 showMsg("‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß");
 refreshData();
 }catch(e){console.error(e);showMsg("‚ùå ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à","red");}
}
$("connectBtn").onclick=connect;

async function refreshData(){
 if(!user)return;
 try{
 const [bal,info,pending]=await Promise.all([
   token.balanceOf(user),
   chef.userInfo(user),
   chef.pendingReward(user)
 ]);
 $("bal").textContent=fmt(bal,dec);
 $("staked").textContent=fmt(info.amount,dec);
 $("pending").textContent=fmt(pending,dec);
 if(priceUSD>0){$("pendingUSD").textContent="‚âà $"+(parseFloat(fmt(pending,dec))*priceUSD).toFixed(4);}
 showMsg("‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏•‡πâ‡∏ß","lime");
 }catch(e){console.error(e);}
}
$("refreshSmall").onclick=()=>{refreshData();$("refreshSmall").style.opacity="0.6";setTimeout(()=>{$("refreshSmall").style.opacity="1";},400);};

$("deposit").onclick=async()=>{
 if(!signer)return showMsg(text[lang].needConnect,"red");
 const v=$("amount").value.trim();if(!v)return;
 try{
 const amt=ethers.utils.parseUnits(v,dec);
 const allow=await token.allowance(user,CHEF);
 if(allow.lt(amt)){showMsg("üîë ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥...");const txA=await token.approve(CHEF,ethers.constants.MaxUint256);await txA.wait();}
 const tx=await chef.deposit(amt);showMsg("‚õΩ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°...");await tx.wait();showMsg("‚úÖ ‡∏ù‡∏≤‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");refreshData();
 }catch(e){console.error(e);showMsg("‚ùå ‡∏ù‡∏≤‡∏Å‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß","red");}
};

$("withdraw").onclick=async()=>{
 if(!signer)return showMsg(text[lang].needConnect,"red");
 const v=$("amount").value.trim();if(!v)return;
 try{
 const amt=ethers.utils.parseUnits(v,dec);
 const tx=await chef.withdraw(amt);showMsg("‚õΩ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°...");await tx.wait();showMsg("‚úÖ ‡∏ñ‡∏≠‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");refreshData();
 }catch(e){console.error(e);showMsg("‚ùå ‡∏ñ‡∏≠‡∏ô‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß","red");}
};

$("claim").onclick=async()=>{
 if(!signer)return showMsg(text[lang].needConnect,"red");
 try{
 const tx=await chef.deposit(0);showMsg("üéÅ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•...");await tx.wait();showMsg("‚úÖ ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");refreshData();
 }catch(e){console.error(e);showMsg("‚ùå ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß","red");}
};

$("buyDNX").onclick=()=>window.open("https://pancakeswap.finance/swap?outputCurrency="+TOKEN,"_blank");

async function updatePrice(){
 try{
 const r=await fetch(PANCAKE_API);
 const j=await r.json();
 if(j?.data?.price){priceUSD=parseFloat(j.data.price);refreshData();}
 }catch(e){console.warn("‚ö†Ô∏è ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏à‡∏≤‡∏Å PancakeSwap ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ");}
}
updatePrice();setInterval(updatePrice,60000);
</script>
</body>
</html>
