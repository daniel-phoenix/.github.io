<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>üåæ DNX FARM ULTRA++</title>

<style>
:root{--gold:#ffd700;--neon:#00ffd5}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;overflow-x:hidden;}
body{
  background: radial-gradient(circle at center,#000 40%,#111 100%);
  color:#fff;font-family:"Poppins",sans-serif;text-align:center;
  display:flex;flex-direction:column;align-items:center;
  justify-content:flex-start;min-height:100vh;overflow:hidden;
}
header{
  width:100%;background:linear-gradient(90deg,#111,#222,#111);
  border-bottom:2px solid var(--gold);
  padding:10px 20px;position:fixed;top:0;left:0;z-index:10;
  display:flex;justify-content:space-between;align-items:center;
  box-shadow:0 0 20px rgba(255,215,0,.4);
}
#connectBtn{
  background:linear-gradient(90deg,#ffd700,#ff9d00);
  border:none;color:#000;font-weight:bold;padding:10px 25px;
  border-radius:20px;cursor:pointer;animation:glow 2s infinite alternate;
}
@keyframes glow{from{box-shadow:0 0 10px rgba(255,215,0,.4);}to{box-shadow:0 0 25px rgba(255,215,0,1);}}
#langToggle{
  background:rgba(0,0,0,.6);border:1px solid var(--gold);
  color:var(--gold);font-weight:bold;padding:8px 15px;
  border-radius:12px;cursor:pointer;
}
#logo{
  position:fixed;top:70px;left:25px;width:90px;height:90px;
  border-radius:50%;background:url('dnx_logo.png') center/cover no-repeat;
  box-shadow:0 0 20px rgba(255,215,0,0.7),inset 0 0 25px rgba(255,215,0,0.6);
  animation:spin 12s linear infinite;z-index:10;
}
@keyframes spin{from{transform:rotate(0);}to{transform:rotate(360deg);}}
h1{margin-top:160px;color:var(--gold);font-size:2em;text-shadow:0 0 30px rgba(255,215,0,.7);}
p{opacity:.9;margin:10px 0 25px;}
.card{
  background:rgba(0,0,0,.7);border:2px solid var(--gold);border-radius:16px;
  box-shadow:0 0 30px rgba(255,215,0,.3);padding:25px;width:min(95%,600px);z-index:2;
}
.stats{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-bottom:10px;}
.stat{background:rgba(255,255,255,.05);border:1px solid var(--neon);border-radius:10px;padding:10px;}
.stat .label{font-size:14px;opacity:.8}
.stat .value{font-weight:bold;color:var(--gold);}
#pendingUSD{font-size:13px;color:#aaa;margin-top:2px;}
input{
  width:80%;padding:10px;margin:10px 0;border-radius:10px;
  border:1px solid var(--neon);background:#000;color:var(--neon);text-align:center;
}
button{border:none;border-radius:10px;padding:10px 18px;margin:5px;font-weight:bold;cursor:pointer;}
.btn{background:linear-gradient(90deg,#00ffd5,#00c8a7);color:#000;}
.gold{background:linear-gradient(90deg,#ffd700,#ff9d00);color:#000;}
button:hover{transform:scale(1.05);}
footer{margin-top:20px;color:#888;font-size:14px;}
</style>
</head>

<body>
<header>
  <button id="connectBtn">üîó Connect Wallet</button>
  <button id="langToggle">EN</button>
</header>

<div id="logo"></div>

<h1 id="title">üåæ DNX FARM ULTRA++</h1>
<p id="subtitle">‡∏£‡∏∞‡∏ö‡∏ö‡∏ü‡∏≤‡∏£‡πå‡∏°‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏à‡∏≤‡∏Å‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç Dynamix</p>

<div class="card">
  <div class="stats">
    <div class="stat"><div class="label" id="lblWallet">‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤</div><div id="waddr" class="value">‚Äî</div></div>
    <div class="stat"><div class="label" id="lblBal">‡∏¢‡∏≠‡∏î DNX ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div><div id="bal" class="value">‚Äî</div></div>
    <div class="stat"><div class="label" id="lblStake">Stake</div><div id="staked" class="value">‚Äî</div></div>
    <div class="stat">
      <div class="label" id="lblReward">‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏Ñ‡πâ‡∏≤‡∏á‡∏£‡∏±‡∏ö</div>
      <div id="pending" class="value">‚Äî</div>
      <div id="pendingUSD">‚âà ‚Äî USD</div>
    </div>
  </div>

  <input id="amount" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô DNX" />
  <div>
    <button id="deposit" class="btn">üí∞ Deposit</button>
    <button id="withdraw" class="btn">üíé Withdraw</button>
    <button id="claim" class="btn gold">üéÅ Claim</button>
    <button id="refresh" class="btn">üîÑ Refresh</button>
  </div>
  <footer>Powered by <b>DNX Finance</b> ¬© 2025</footer>
</div>

<audio id="clickSound" src="https://assets.mixkit.co/sfx/preview/mixkit-interface-click-1126.mp3" preload="auto"></audio>
<audio id="rewardSound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-complete-or-approved-mission-205.mp3" preload="auto"></audio>
<audio id="connectSound" src="https://assets.mixkit.co/sfx/preview/mixkit-magic-sparkle-917.mp3" preload="auto"></audio>

<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

<script>
window.addEventListener("load",()=>{
  const CHEF="0xEa13c02F1c69668c2C9f873Fe6fdf44FDD3B0C3C";
  const TOKEN="0x7DB860CC9D7f64Ed1B39de6621ebc94440C8dc62";
  const ABIchef=[
    "function deposit(uint256) external",
    "function withdraw(uint256) external",
    "function pendingReward(address) view returns(uint256)",
    "function stakes(address) view returns(uint256 amount,uint256 rewardDebt)"
  ];
  const ABItoken=[
    "function balanceOf(address) view returns(uint256)",
    "function decimals() view returns(uint8)",
    "function allowance(address,address) view returns(uint256)",
    "function approve(address,uint256) returns(bool)"
  ];

  let provider,signer,user,chef,token,dec=18,priceUSD=0;
  const $=id=>document.getElementById(id);
  const play=id=>{const s=$(id);if(s){s.currentTime=0;s.play().catch(()=>{});}};

  // üåê Language
  let lang="TH";
  const txt={
    TH:{connect:"üîó ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤",wallet:"‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤",total:"‡∏¢‡∏≠‡∏î DNX ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",
        stake:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Stake",reward:"‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏Ñ‡πâ‡∏≤‡∏á‡∏£‡∏±‡∏ö",placeholder:"‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô DNX",
        deposit:"üí∞ ‡∏ù‡∏≤‡∏Å (Deposit)",withdraw:"üíé ‡∏ñ‡∏≠‡∏ô (Withdraw)",claim:"üéÅ ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• (Claim)",
        refresh:"üîÑ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä",subtitle:"‡∏£‡∏∞‡∏ö‡∏ö‡∏ü‡∏≤‡∏£‡πå‡∏°‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏à‡∏≤‡∏Å‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç Dynamix",toggle:"EN"},
    EN:{connect:"üîó Connect Wallet",wallet:"Wallet",total:"Total DNX",
        stake:"Staked",reward:"Pending Reward",placeholder:"Enter DNX amount",
        deposit:"üí∞ Deposit",withdraw:"üíé Withdraw",claim:"üéÅ Claim",refresh:"üîÑ Refresh",
        subtitle:"Full farming system to earn Dynamix rewards",toggle:"TH"}
  };
  function setLang(l){lang=l;const t=txt[l];
    $("connectBtn").textContent=t.connect; $("lblWallet").textContent=t.wallet;
    $("lblBal").textContent=t.total; $("lblStake").textContent=t.stake;
    $("lblReward").textContent=t.reward; $("amount").placeholder=t.placeholder;
    $("deposit").textContent=t.deposit; $("withdraw").textContent=t.withdraw;
    $("claim").textContent=t.claim; $("refresh").textContent=t.refresh;
    $("subtitle").textContent=t.subtitle; $("langToggle").textContent=t.toggle;
  }
  $("langToggle").addEventListener("click",()=>setLang(lang==="TH"?"EN":"TH"));
  setLang("TH");

  // üíµ fetch price from DEXScreener
  async function fetchPrice(){
    try{
      const res=await fetch("https://api.dexscreener.com/latest/dex/pairs/bsc/0x0000000000000000000000000000000000000000");
      // üëÜ ‡πÅ‡∏Å‡πâ‡πÄ‡∏õ‡πá‡∏ô Pair ID ‡∏Ç‡∏≠‡∏á DNX ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏•‡∏¥‡∏™‡∏ï‡πå‡∏à‡∏£‡∏¥‡∏á
      const data=await res.json();
      priceUSD=parseFloat(data?.pair?.priceUsd||0)||0;
      if(priceUSD>0) console.log("üí≤ DNX Price =",priceUSD,"USD");
    }catch{priceUSD=0;}
  }

  async function connect(){
    play("clickSound");
    if(!window.ethereum)return alert("‚ö†Ô∏è ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á MetaMask ‡∏Å‡πà‡∏≠‡∏ô");
    provider=new ethers.providers.Web3Provider(window.ethereum);
    await provider.send("eth_requestAccounts",[]);
    signer=provider.getSigner(); user=await signer.getAddress();
    $("waddr").textContent=user.slice(0,6)+"..."+user.slice(-4);
    token=new ethers.Contract(TOKEN,ABItoken,signer);
    chef=new ethers.Contract(CHEF,ABIchef,signer);
    dec=await token.decimals().catch(()=>18);
    play("connectSound");
    await fetchPrice();
    refreshAll();
  }

  async function refreshAll(){
    if(!signer)return;
    const [bal,st,p]=await Promise.all([
      token.balanceOf(user),chef.stakes(user),chef.pendingReward(user)
    ]);
    $("bal").textContent=ethers.utils.formatUnits(bal,dec);
    $("staked").textContent=ethers.utils.formatUnits(st.amount,dec);
    $("pending").textContent=ethers.utils.formatUnits(p,dec);
    const usd=priceUSD*parseFloat(ethers.utils.formatUnits(p,dec)||0);
    $("pendingUSD").textContent=`‚âà ${usd.toFixed(4)} USD`;
  }

  async function ensureApprove(a){
    const allow=await token.allowance(user,CHEF);
    if(allow.gte(a))return;
    const tx=await token.approve(CHEF,ethers.constants.MaxUint256);
    await tx.wait();
  }

  async function deposit(){
    if(!signer)return alert("Connect wallet first");
    const amt=$("amount").value; if(!amt)return alert("‡πÉ‡∏™‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡πà‡∏≠‡∏ô");
    const a=ethers.utils.parseUnits(amt,dec);
    await ensureApprove(a);
    const tx=await chef.deposit(a); await tx.wait();
    play("rewardSound"); alert("‚úÖ Deposit success");
    $("amount").value=""; refreshAll();
  }

  async function withdraw(){
    if(!signer)return alert("Connect wallet first");
    const amt=$("amount").value; if(!amt)return alert("‡πÉ‡∏™‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡πà‡∏≠‡∏ô");
    const a=ethers.utils.parseUnits(amt,dec);
    const tx=await chef.withdraw(a); await tx.wait();
    play("rewardSound"); alert("‚úÖ Withdraw success");
    $("amount").value=""; refreshAll();
  }

  async function claim(){
    if(!signer)return alert("Connect wallet first");
    const tx=await chef.deposit(0); await tx.wait();
    play("rewardSound"); alert("‚úÖ Claim success");
    refreshAll();
  }

  $("connectBtn").onclick=connect;
  $("deposit").onclick=deposit;
  $("withdraw").onclick=withdraw;
  $("claim").onclick=claim;
  $("refresh").onclick=refreshAll;
});
</script>
</body>
</html>
