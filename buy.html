<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üí∞ Buy GDSX</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <style>
    body {
      font-family: "Poppins", "Noto Sans Thai", sans-serif;
      background: radial-gradient(circle at top, #000 40%, #111 100%);
      color: white;
      text-align: center;
      padding: 80px 20px;
    }
    h1 {
      font-size: 2rem;
      margin-bottom: 40px;
      color: #ffd700;
    }
    input {
      width: 200px;
      padding: 10px;
      font-size: 1rem;
      border-radius: 10px;
      border: none;
      text-align: center;
      margin-bottom: 20px;
    }
    button {
      background: linear-gradient(90deg, #ffd700, #ff9a00);
      color: black;
      font-weight: bold;
      border: none;
      border-radius: 10px;
      padding: 12px 25px;
      margin: 8px;
      cursor: pointer;
      transition: 0.2s;
    }
    button:hover {
      transform: scale(1.05);
    }
  </style>
</head>

<body>
  <h1>üíé ‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç GDSX ‡∏î‡πâ‡∏ß‡∏¢ USDT</h1>

  <input id="amount" type="number" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô USDT" />
  <br />
  <button onclick="connectWallet()">üîó Connect Wallet</button>
  <button onclick="buyGDSX()">üí∞ Buy GDSX</button>

  <script>
    // ==== ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Smart Contract ====
    const CONTRACT_ADDRESS = "0xe0323a9AdD98F14939ddeb62DC4076AfeE94DFad"; // GDSXPaymentUSDT
    const ABI = [
      {
        "inputs": [{ "internalType": "uint256", "name": "usdtAmount", "type": "uint256" }],
        "name": "buyGDSX",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
      }
    ];

    let provider, signer, contract;

    // ==== ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤ ====
    async function connectWallet() {
      if (window.ethereum) {
        provider = new ethers.providers.Web3Provider(window.ethereum);
        await provider.send("eth_requestAccounts", []);
        signer = provider.getSigner();
        contract = new ethers.Contract(CONTRACT_ADDRESS, ABI, signer);
        alert("‚úÖ Wallet Connected!");
      } else {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á MetaMask ‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô");
      }
    }

    // ==== ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç GDSX ====
    async function buyGDSX() {
      const usdtAmount = document.getElementById("amount").value;
      if (!usdtAmount || usdtAmount <= 0) {
        alert("‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô USDT ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠");
        return;
      }

      try {
        const tx = await contract.buyGDSX(usdtAmount);
        await tx.wait();
        alert("üéâ ‡∏ã‡∏∑‡πâ‡∏≠ GDSX ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
      } catch (error) {
        alert("‚ùå Error: " + (error.message || error));
      }
    }
  </script>
</body>
</html>
