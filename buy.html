<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BUY GDSX üíé</title>
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
<style>
body {
  font-family: "Poppins","Noto Sans Thai",sans-serif;
  background: radial-gradient(circle at top,#000 40%,#111 100%);
  color: #ffd700;
  text-align: center;
  padding-top: 100px;
}
h1 { font-size: 2em; margin-bottom: 10px; }
p { color: #ccc; }
input {
  padding: 12px;
  border-radius: 10px;
  border: none;
  width: 180px;
  text-align: center;
  font-size: 18px;
}
button {
  margin-top: 20px;
  padding: 15px 30px;
  border: none;
  border-radius: 12px;
  background: #ffd700;
  color: #000;
  font-weight: bold;
  font-size: 18px;
  cursor: pointer;
  transition: 0.3s;
}
button:hover { background: #fff; color: #000; }
</style>
</head>
<body>
  <h1>BUY GDSX üíé</h1>
  <p>‡πÉ‡∏ä‡πâ USDT ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç GDSX ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á</p>
  <input id="amount" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô USDT" type="number" min="1">
  <br>
  <button id="buyBtn">Connect & Buy</button>

  <script>
  const CONTRACT_ADDRESS = "0xe0323a9AdD98F14939ddeb62DC4076AfeE94DFad";
  const USDT_ADDRESS = "0x55d398326f99059fF775485246999027B3197955"; // USDT ‡∏ö‡∏ô BSC
  const ABI = [
    "function buyGDSX(uint256 _usdtAmount)",
    "function pricePerUSDT() view returns (uint256)"
  ];

  async function buyNow() {
    if (!window.ethereum) return alert("‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏õ‡∏¥‡∏î MetaMask ‡∏Å‡πà‡∏≠‡∏ô");
    const provider = new ethers.providers.Web3Provider(window.ethereum);
    await provider.send("eth_requestAccounts", []);
    const signer = provider.getSigner();

    const amount = document.getElementById("amount").value;
    if (amount <= 0) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô USDT ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠");

    const contract = new ethers.Contract(CONTRACT_ADDRESS, ABI, signer);
    const usdt = new ethers.Contract(USDT_ADDRESS, [
      "function approve(address spender, uint256 amount) external returns (bool)"
    ], signer);

    const usdtAmount = ethers.utils.parseUnits(amount, 18);

    // ‚úÖ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ USDT
    const approveTx = await usdt.approve(CONTRACT_ADDRESS, usdtAmount);
    await approveTx.wait();

    // ‚úÖ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ã‡∏∑‡πâ‡∏≠ GDSX
    const buyTx = await contract.buyGDSX(usdtAmount);
    await buyTx.wait();

    alert("üéâ ‡∏ã‡∏∑‡πâ‡∏≠ GDSX ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß! ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢");
  }

  document.getElementById("buyBtn").onclick = buyNow;
  </script>
</body>
</html>
