<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üåæ GDSX FARM ULTRA++</title>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

<style>
:root { --gold: #ffd700; --neon: #00ffd5; }
body {
  background: linear-gradient(to bottom,#111,#000);
  color: #fff; font-family: "Poppins","Noto Sans Thai",sans-serif;
  text-align:center; padding-bottom:80px;
}
.logo { position:fixed; top:15px; left:15px; width:70px; height:70px; border-radius:50%;
  animation:spin 10s linear infinite,glow 2s ease-in-out infinite alternate;
  box-shadow:0 0 20px rgba(255,215,0,.5); z-index:10;
}
@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
@keyframes glow{from{box-shadow:0 0 10px rgba(255,215,0,.4)}to{box-shadow:0 0 25px rgba(255,215,0,.9)}}
header{padding-top:100px;}
h1{color:var(--gold); text-shadow:0 0 8px rgba(255,215,0,.5);}
.panel{margin:25px auto;width:90%;max-width:420px;background:rgba(20,20,20,.85);
  border:1px solid var(--gold);border-radius:20px;padding:20px;}
button{background:#222;color:var(--gold);border:1px solid var(--gold);
  border-radius:10px;padding:10px 20px;margin:5px;cursor:pointer;}
button:hover{background:rgba(255,215,0,.2);}
footer{position:fixed;bottom:0;width:100%;background:#111;border-top:1px solid rgba(255,215,0,.3);
  color:var(--gold);padding:8px 0;font-size:.9em;text-shadow:0 0 8px var(--gold);}
</style>
</head>
<body>

<img class="logo" src="data:image/png;base64,{{YOUR_GDSX_LOGO_BASE64}}" alt="GDSX Logo">

<header>
  <h1>üåæ GDSX FARM ULTRA++</h1>
  <p>Gold Digital System X ‚Äî ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•‡πÅ‡∏´‡πà‡∏á‡∏¢‡∏∏‡∏Ñ‡πÉ‡∏´‡∏°‡πà</p>
</header>

<section class="panel">
  <h2>üí∞ Your Farm</h2>
  <div>Wallet: <span id="wallet">-</span></div>
  <div>Your Stake: <span id="stake">0</span> GDSX</div>
  <div>Pending Reward: <span id="reward">0</span> GDSX</div>

  <button onclick="connectWallet()">üîó Connect Wallet</button>
  <button onclick="deposit()">Deposit</button>
  <button onclick="withdraw()">Withdraw</button>
  <button onclick="claim()">Claim</button>
  <button onclick="loadData()">üîÑ Refresh</button>

  <div style="margin-top:20px;border-top:1px dashed rgba(255,215,0,0.3);padding-top:10px;">
    <p>üí∞ Treasury Balance: <span id="treasuryBal">0</span> GDSX</p>
  </div>
</section>

<footer>üåü The Future of Digital Gold üåü</footer>

<script>
const TOKEN = "0xC6EdBBBa4C48a50C9a10EaAaFc99FCb840b5f496";
const STAKING = "0xEc9913d971e43f5b4a0d260381e60595DCb7268e";
const TREASURY = "0xEcd3965A43A5be3773Ab01A42F448576690Ec8e2";

const abiToken = [
  "function approve(address spender,uint256 amount) external returns(bool)",
  "function balanceOf(address) view returns(uint256)",
  "function decimals() view returns(uint8)"
];
const abiStaking = [
  "function deposit(uint256 amount) public",
  "function withdraw(uint256 amount) public",
  "function claim() public",
  "function userInfo(address user) view returns(uint256 amount,uint256 rewardDebt)",
  "function pendingReward(address user) view returns(uint256)"
];
const abiTreasury = [
  "function dnxToken() view returns(address)",
  "function balanceOf(address token) view returns(uint256)"
];

let provider, signer, walletAddr;
let token, staking, treasury;

async function connectWallet(){
  if(!window.ethereum) return alert("‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á MetaMask");
  provider = new ethers.providers.Web3Provider(window.ethereum);
  await provider.send("eth_requestAccounts", []);
  signer = provider.getSigner();
  walletAddr = await signer.getAddress();
  document.getElementById("wallet").textContent = walletAddr.slice(0,6)+"..."+walletAddr.slice(-4);
  token = new ethers.Contract(TOKEN, abiToken, signer);
  staking = new ethers.Contract(STAKING, abiStaking, signer);
  treasury = new ethers.Contract(TREASURY, abiTreasury, provider);
  loadData();
}

async function loadData(){
  if(!signer) return;
  try {
    const [stakeInfo, pending] = await Promise.all([
      staking.userInfo(walletAddr),
      staking.pendingReward(walletAddr)
    ]);
    const decimals = await token.decimals();
    const stakeVal = ethers.utils.formatUnits(stakeInfo.amount, decimals);
    const pendingVal = ethers.utils.formatUnits(pending, decimals);
    document.getElementById("stake").textContent = parseFloat(stakeVal).toFixed(4);
    document.getElementById("reward").textContent = parseFloat(pendingVal).toFixed(4);

    const bal = await token.balanceOf(TREASURY);
    document.getElementById("treasuryBal").textContent = parseFloat(ethers.utils.formatUnits(bal, decimals)).toFixed(2);
  } catch(err){ console.error(err); alert("Error loading data"); }
}

async function deposit(){
  if(!signer) return;
  const amount = prompt("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô GDSX ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ù‡∏≤‡∏Å:");
  if(!amount) return;
  const decimals = await token.decimals();
  const amtWei = ethers.utils.parseUnits(amount, decimals);
  await token.approve(STAKING, amtWei);
  const tx = await staking.deposit(amtWei);
  await tx.wait();
  alert("‚úÖ Deposit ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
  loadData();
}

async function withdraw(){
  const amount = prompt("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô GDSX ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ñ‡∏≠‡∏ô:");
  if(!amount) return;
  const decimals = await token.decimals();
  const amtWei = ethers.utils.parseUnits(amount, decimals);
  const tx = await staking.withdraw(amtWei);
  await tx.wait();
  alert("üì§ Withdraw ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
  loadData();
}

async function claim(){
  const tx = await staking.claim();
  await tx.wait();
  alert("üéÅ Claim ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
  loadData();
}
</script>
</body>
</html>
