<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üåæ DNX FARM ULTRA++</title>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
<style>
:root{
  --gold:#ffd700;
  --neon:#00ffd5;
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{
  height:100%;overflow-x:hidden;
  font-family:"Poppins","Noto Sans Thai",sans-serif;
  background:radial-gradient(circle at top,#000 40%,#111 100%);
  color:#fff;
}
header{
  position:fixed;top:0;left:0;right:0;z-index:20;
  display:flex;justify-content:space-between;align-items:center;
  padding:8px 12px;background:linear-gradient(90deg,#111,#1a1a1a,#111);
  border-bottom:2px solid var(--gold);
  box-shadow:0 0 15px rgba(255,215,0,.2);
}
button{cursor:pointer;border:none;font-weight:700;transition:.2s}
button:hover{filter:brightness(1.2);transform:translateY(-1px)}
#langToggle{
  background:rgba(0,0,0,.7);
  border:1px solid var(--gold);
  color:var(--gold);
  padding:6px 10px;
  border-radius:10px;
}
#claimFreeTop{
  background:linear-gradient(90deg,#00ffd5,#00c8a7);
  color:#000;padding:6px 12px;border-radius:14px;font-size:13px;
  box-shadow:0 0 10px #00ffd5;
}
#connectBtn{
  background:linear-gradient(90deg,#ffd700,#ff9d00);
  color:#000;padding:8px 14px;border-radius:14px;
  box-shadow:0 0 10px rgba(255,215,0,.6);
}
#logo{
  position:fixed;top:80px;left:20px;width:80px;height:80px;
  border-radius:50%;background:url('dnx_logo.png') center/cover no-repeat;
  box-shadow:0 0 30px rgba(255,215,0,.7);
  animation:spin 10s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}
main{text-align:center;margin-top:160px}
h1{
  color:var(--gold);font-size:2rem;
  text-shadow:0 0 25px rgba(255,215,0,.8);
  animation:glow 2s ease-in-out infinite alternate;
}
@keyframes glow{
  from{text-shadow:0 0 10px #ffd700,0 0 20px #ff9d00;}
  to{text-shadow:0 0 25px #ffef99,0 0 40px #fff8dc;}
}
#refreshSmall{
  display:block;margin:10px auto;
  background:#111;color:#ddd;border:1px solid var(--neon);
  border-radius:10px;padding:6px 14px;font-size:14px;
  transition:all .4s ease;box-shadow:0 0 10px rgba(0,255,213,.4);
}
#refreshSmall.loading{
  transform:rotate(360deg) scale(1.05);
  background:linear-gradient(90deg,#00ffd5,#009688);
  color:#000;border-color:#00ffd5;
  box-shadow:0 0 20px #00ffd5;
}
.card{
  background:rgba(0,0,0,.7);
  border:2px solid var(--gold);
  border-radius:16px;
  box-shadow:0 0 25px rgba(255,215,0,.3);
  padding:20px;width:min(95%,600px);margin:auto;margin-top:30px;
}
.statgrid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-bottom:10px}
.stat{background:rgba(255,255,255,.05);border:1px solid var(--neon);border-radius:10px;padding:10px}
.stat .label{font-size:13px;opacity:.8}
.stat .value{font-weight:800;color:var(--gold)}
input{
  width:80%;padding:10px;margin:10px 0;
  border-radius:10px;border:1px solid var(--neon);
  background:#000;color:#00ffd5;text-align:center;
}
.action{border:none;border-radius:10px;padding:10px 16px;margin:5px;font-weight:800}
.btn{background:linear-gradient(90deg,#00ffd5,#00c8a7);color:#000}
.gold{background:linear-gradient(90deg,#ffd700,#ff9d00);color:#000}
footer{margin-top:14px;color:#888;font-size:14px}
</style>
</head>
<body>
<header>
  <button id="langToggle">EN</button>
  <button id="claimFreeTop">üéÅ Claim 500 DNX ‡∏ü‡∏£‡∏µ</button>
  <button id="connectBtn">üîó ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤</button>
</header>

<div id="logo"></div>
<button id="refreshSmall">üîÑ Refresh</button>

<main>
  <h1>üåæ DNX FARM ULTRA++</h1>
  <div class="card">
    <div class="statgrid">
      <div class="stat"><div class="label" id="lblWallet">‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤</div><div id="addr" class="value">‚Äî</div></div>
      <div class="stat"><div class="label" id="lblBal">‡∏¢‡∏≠‡∏î DNX ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div><div id="bal" class="value">‚Äî</div></div>
      <div class="stat"><div class="label" id="lblStake">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Stake</div><div id="staked" class="value">‚Äî</div></div>
      <div class="stat"><div class="label" id="lblReward">‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏Ñ‡πâ‡∏≤‡∏á‡∏£‡∏±‡∏ö</div><div id="reward" class="value">‚Äî</div></div>
    </div>
    <input id="amount" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô DNX">
    <div>
      <button id="deposit" class="action btn">üí∞ ‡∏ù‡∏≤‡∏Å (Deposit)</button>
      <button id="withdraw" class="action btn">üíé ‡∏ñ‡∏≠‡∏ô (Withdraw)</button>
    </div>
    <button id="claim" class="action gold">üéÅ ‡πÄ‡∏Ñ‡∏•‡∏°‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• (Claim)</button>
    <footer>Powered by <b>DNX Finance</b> ¬© 2025</footer>
  </div>
</main>

<script>
const TOKEN="0x7DB860CC9D7f64Ed1B39de6621ebc94440C8dc62";
const STAKING_V2="0x6C3B00F3C1bE8872C3060bdBAFAE1Df677D8077F";
const ABIchef=[
 "function deposit(uint256) external",
 "function withdraw(uint256) external",
 "function claim() external",
 "function userInfo(address) view returns(uint256 amount,uint256 rewardDebt)",
 "function pendingReward(address) view returns(uint256)"
];
const ABItoken=[
 "function balanceOf(address) view returns(uint256)",
 "function decimals() view returns(uint8)",
 "function allowance(address,address) view returns(uint256)",
 "function approve(address,uint256) returns(bool)"
];
const $=id=>document.getElementById(id);
const fmt=(n,dec=18)=>parseFloat(ethers.utils.formatUnits(n,dec)).toFixed(4);
let provider,signer,user,token,chef,dec=18;

// üîÑ ‡∏õ‡∏∏‡πà‡∏° Refresh ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡∏≠‡∏≠‡∏ô
$("refreshSmall").onclick=()=>{
 const b=$("refreshSmall");
 b.classList.add("loading");
 setTimeout(()=>b.classList.remove("loading"),1200);
 refresh();
};

async function connect(){
 if(!window.ethereum)return alert("‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏µ MetaMask");
 const acc=await ethereum.request({method:"eth_requestAccounts"});
 user=acc[0];
 provider=new ethers.providers.Web3Provider(window.ethereum);
 signer=provider.getSigner();
 token=new ethers.Contract(TOKEN,ABItoken,signer);
 chef=new ethers.Contract(STAKING_V2,ABIchef,signer);
 dec=await token.decimals();
 $("addr").textContent=user.slice(0,6)+"..."+user.slice(-4);
 refresh();
}
$("connectBtn").onclick=connect;

async function refresh(){
 if(!user)return;
 const [bal,info,pending]=await Promise.all([
   token.balanceOf(user),
   chef.userInfo(user),
   chef.pendingReward(user)
 ]);
 $("bal").textContent=fmt(bal,dec);
 $("staked").textContent=fmt(info.amount,dec);
 $("reward").textContent=fmt(pending,dec);
}

// ‡∏ù‡∏≤‡∏Å / ‡∏ñ‡∏≠‡∏ô / ‡πÄ‡∏Ñ‡∏•‡∏°
async function ensureApprove(amount){
 const allow=await token.allowance(user,STAKING_V2);
 if(allow.gte(amount))return;
 const tx=await token.approve(STAKING_V2,ethers.constants.MaxUint256);
 await tx.wait();
}
$("deposit").onclick=async()=>{
 const v=$("amount").value.trim();
 if(!v)return;
 const amt=ethers.utils.parseUnits(v,dec);
 await ensureApprove(amt);
 const tx=await chef.deposit(amt);await tx.wait();
 alert("‚úÖ ‡∏ù‡∏≤‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");refresh();
};
$("withdraw").onclick=async()=>{
 const v=$("amount").value.trim();
 if(!v)return;
 const amt=ethers.utils.parseUnits(v,dec);
 const tx=await chef.withdraw(amt);await tx.wait();
 alert("‚úÖ ‡∏ñ‡∏≠‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");refresh();
};
$("claim").onclick=async()=>{
 const tx=await chef.claim();await tx.wait();
 alert("‚úÖ ‡πÄ‡∏Ñ‡∏•‡∏°‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");refresh();
};

// üåê ‡∏õ‡∏∏‡πà‡∏°‡∏†‡∏≤‡∏©‡∏≤ (EN / TH)
let lang=localStorage.getItem("DNX_LANG")||"TH";
const text={
 TH:{toggle:"EN",wallet:"‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤",total:"‡∏¢‡∏≠‡∏î DNX ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",stake:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Stake",reward:"‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏Ñ‡πâ‡∏≤‡∏á‡∏£‡∏±‡∏ö"},
 EN:{toggle:"TH",wallet:"Wallet",total:"Total DNX",stake:"Your Stake",reward:"Pending Reward"}
};
function applyLang(){
 const L=text[lang];
 $("langToggle").textContent=L.toggle;
 $("lblWallet").textContent=L.wallet;
 $("lblBal").textContent=L.total;
 $("lblStake").textContent=L.stake;
 $("lblReward").textContent=L.reward;
}
$("langToggle").onclick=()=>{lang=(lang==="TH")?"EN":"TH";localStorage.setItem("DNX_LANG",lang);applyLang();};
applyLang();
</script>
</body>
</html>
