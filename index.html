<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üåæ GDSX FARM ULTRA++</title>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

<style>
:root { --gold: #ffd700; --neon: #00ffd5; }
* { box-sizing:border-box; margin:0; padding:0; font-family:"Poppins","Noto Sans Thai",sans-serif; }
body { background:linear-gradient(to bottom,#111 0%,#000 85%); color:white; text-align:center;
  display:flex; flex-direction:column; align-items:center; min-height:100vh; overflow-x:hidden; padding-bottom:80px; }

/* ‡πÇ‡∏•‡πÇ‡∏Å‡πâ GDSX */
.logo { position:fixed; top:15px; left:15px; width:70px; height:70px; border-radius:50%;
  animation:spin 10s linear infinite, glow 2s ease-in-out infinite alternate;
  box-shadow:0 0 20px rgba(255,215,0,.5); filter:drop-shadow(0 0 10px rgba(255,215,0,.6)); z-index:10; }
@keyframes spin { from{transform:rotate(0)} to{transform:rotate(360deg)} }
@keyframes glow { from{box-shadow:0 0 10px rgba(255,215,0,.4)} to{box-shadow:0 0 25px rgba(255,215,0,.9)} }
.logo::after { content:""; position:absolute; bottom:-10px; left:10px; width:80%; height:15px;
  background:radial-gradient(circle,rgba(255,215,0,.4)0%,transparent 80%); filter:blur(8px); }

/* ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß */
header { width:100%; text-align:center; padding-top:90px; }
h1 { color:var(--gold); font-size:1.8em; text-shadow:0 0 8px rgba(255,215,0,.5); }
.subtitle { color:#ccc; font-size:0.9em; margin-top:5px; }

/* ‡∏™‡πà‡∏ß‡∏ô‡∏ü‡∏≤‡∏£‡πå‡∏° */
.panel { margin-top:25px; width:90%; max-width:420px; background:rgba(20,20,20,.85);
  border:1px solid var(--gold); border-radius:20px; padding:20px; box-shadow:0 0 12px rgba(255,215,0,.2); }
.panel h2 { color:var(--gold); margin-bottom:10px; }
.data { margin:8px 0; }
.data span { color:var(--gold); font-weight:600; }
button { background:linear-gradient(90deg,#222,#444); color:var(--gold);
  border:1px solid var(--gold); border-radius:10px; padding:10px 20px; margin:5px; cursor:pointer; transition:0.3s; }
button:hover { background:rgba(255,215,0,.2); }

/* Admin */
.admin { margin-top:15px; border-top:1px dashed rgba(255,215,0,.3); padding-top:10px; }
.admin input { width:60%; padding:6px; border-radius:6px; border:1px solid #555; text-align:center; margin-bottom:8px; }

/* Lucky Draw */
.lucky { margin-top:20px; background:rgba(255,215,0,.05); padding:10px; border-radius:12px; border:1px solid rgba(255,215,0,.3); }
.lucky h3 { color:var(--gold); margin-bottom:5px; }

/* Popup Menu */
.menu-toggle { position:fixed; top:15px; right:15px; font-size:28px; color:var(--gold); cursor:pointer; z-index:2000; }
.popup-menu { position:fixed; top:0; right:-250px; width:250px; height:100%; background:rgba(20,20,20,.95);
  border-left:2px solid var(--gold); display:flex; flex-direction:column; justify-content:center;
  transition:0.4s; z-index:1500; }
.popup-menu.active { right:0; }
.popup-menu a { color:var(--gold); text-decoration:none; padding:12px 20px; border-bottom:1px solid rgba(255,215,0,.3); }
.popup-menu a:hover { background:rgba(255,215,0,.1); }

/* Footer */
footer { position:fixed; bottom:0; width:100%; background:#111; border-top:1px solid rgba(255,215,0,.3);
  color:var(--gold); font-size:0.9em; padding:8px 0; animation:glowText 3s infinite alternate; }
@keyframes glowText { from{ text-shadow:0 0 4px var(--gold);} to{ text-shadow:0 0 12px var(--gold);} }
</style>
</head>
<body>

<img class="logo" src="data:image/png;base64,{{YOUR_GDSX_LOGO_BASE64}}" alt="GDSX Logo">
<div class="menu-toggle" onclick="toggleMenu()">‚ò∞</div>

<div id="popupMenu" class="popup-menu">
  <a href="#farm">üåæ Farm</a>
  <a href="#treasury">üí∞ Treasury</a>
  <a href="#lucky">üéÅ Lucky Draw</a>
  <a href="#whitepaper">üìÑ Whitepaper</a>
  <a href="#airdrop">üéà Airdrop</a>
  <a href="#community">üí¨ Community</a>
</div>

<header>
  <h1>üåæ GDSX FARM ULTRA++</h1>
  <p class="subtitle">Gold Digital System X ‚Äî ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•‡πÅ‡∏´‡πà‡∏á‡∏¢‡∏∏‡∏Ñ‡πÉ‡∏´‡∏°‡πà</p>
</header>

<section id="farm" class="panel">
  <h2>üí∞ Your Farm</h2>
  <div class="data">Wallet: <span id="wallet">-</span></div>
  <div class="data">Your Stake: <span id="stake">0</span> GDSX</div>
  <div class="data">Pending Reward: <span id="reward">0</span> GDSX</div>

  <button onclick="connectWallet()">üîó Connect Wallet</button>
  <button onclick="deposit()">Deposit</button>
  <button onclick="withdraw()">Withdraw</button>
  <button onclick="claim()">Claim</button>
  <button onclick="loadData()">üîÑ Refresh</button>

  <div class="admin" id="adminPanel">
    <h3>‚öôÔ∏è Admin Panel</h3>
    <input type="number" id="rewardRate" placeholder="Reward Rate (mock)">
    <button onclick="setRewardRate()">Set Reward Rate</button>
    <p>üí∞ Treasury Balance: <span id="treasuryBal">0</span> GDSX</p>
  </div>

  <div class="lucky" id="lucky">
    <h3>üéÅ Lucky Draw Weekly</h3>
    <p>‡∏à‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå</p>
    <p>‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤: <span id="countdown">--:--:--</span></p>
    <button id="drawBtn" onclick="drawLucky()">üé≤ ‡∏à‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</button>
    <p id="luckyResult">‡∏ú‡∏π‡πâ‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ: -</p>
  </div>
</section>

<footer>üåü The Future of Digital Gold ‚Äî ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•‡πÅ‡∏´‡πà‡∏á‡∏¢‡∏∏‡∏Ñ‡πÉ‡∏´‡∏°‡πà üåü</footer>

<script>
// ===== ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Smart Contract ‡∏à‡∏£‡∏¥‡∏á =====
const TOKEN = "0xC6EdBBBa4C48a50C9a10EaAaFc99FCb840b5f496";
const STAKING = "0xEc9913d971e43f5b4a0d260381e60595DCb7268e";
const TREASURY = "0xEcd3965A43A5be3773Ab01A42F448576690Ec8e2";

const abiToken = [
  "function approve(address spender,uint256 amount) external returns(bool)",
  "function balanceOf(address) view returns(uint256)",
  "function decimals() view returns(uint8)"
];
const abiStaking = [
  "function deposit(uint256 amount) public",
  "function withdraw(uint256 amount) public",
  "function claim() public",
  "function userInfo(address) view returns(uint256 amount,uint256 rewardDebt)",
  "function pendingReward(address) view returns(uint256)"
];

let provider, signer, account, token, staking;

// === Connect Wallet ===
async function connectWallet(){
  if(!window.ethereum) return alert("‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á MetaMask ‡∏Å‡πà‡∏≠‡∏ô");
  provider = new ethers.providers.Web3Provider(window.ethereum);
  await provider.send("eth_requestAccounts", []);
  signer = provider.getSigner();
  account = await signer.getAddress();
  document.getElementById("wallet").textContent = account.slice(0,6)+"..."+account.slice(-4);
  token = new ethers.Contract(TOKEN, abiToken, signer);
  staking = new ethers.Contract(STAKING, abiStaking, signer);
  loadData();
}

// === Load Data ===
async function loadData(){
  if(!signer) return;
  try {
    const [info, reward] = await Promise.all([
      staking.userInfo(account),
      staking.pendingReward(account)
    ]);
    const decimals = await token.decimals();
    document.getElementById("stake").textContent = parseFloat(ethers.utils.formatUnits(info.amount, decimals)).toFixed(4);
    document.getElementById("reward").textContent = parseFloat(ethers.utils.formatUnits(reward, decimals)).toFixed(4);
    const treasuryBal = await token.balanceOf(TREASURY);
    document.getElementById("treasuryBal").textContent = parseFloat(ethers.utils.formatUnits(treasuryBal, decimals)).toFixed(2);
  } catch(e){ console.error(e); }
}

// === Deposit / Withdraw / Claim ===
async function deposit(){
  const val = prompt("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô GDSX ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ù‡∏≤‡∏Å:");
  if(!val) return;
  const decimals = await token.decimals();
  const amount = ethers.utils.parseUnits(val, decimals);
  await token.approve(STAKING, amount);
  const tx = await staking.deposit(amount);
  await tx.wait();
  alert("‚úÖ ‡∏ù‡∏≤‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
  loadData();
}
async function withdraw(){
  const val = prompt("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô GDSX ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ñ‡∏≠‡∏ô:");
  if(!val) return;
  const decimals = await token.decimals();
  const amount = ethers.utils.parseUnits(val, decimals);
  const tx = await staking.withdraw(amount);
  await tx.wait();
  alert("üì§ ‡∏ñ‡∏≠‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
  loadData();
}
async function claim(){
  const tx = await staking.claim();
  await tx.wait();
  alert("üéÅ ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
  loadData();
}

// === Lucky Draw (‡∏à‡∏≥‡∏•‡∏≠‡∏á) ===
function updateCountdown(){
  const now=new Date();const nextSun=new Date(now);
  nextSun.setDate(now.getDate()+(7-now.getDay()));nextSun.setHours(0,0,0,0);
  const diff=nextSun-now;const d=Math.floor(diff/86400000);
  const h=Math.floor((diff/3600000)%24);const m=Math.floor((diff/60000)%60);const s=Math.floor((diff/1000)%60);
  document.getElementById("countdown").textContent=`${d}d ${h}h ${m}m ${s}s`;
}
setInterval(updateCountdown,1000);
function drawLucky(){
  const users=["0x1234...ABCD","0x9F8a...E56C","0xAaa1...BbC3"];
  const winner=users[Math.floor(Math.random()*users.length)];
  document.getElementById("luckyResult").textContent="üéâ ‡∏ú‡∏π‡πâ‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ: "+winner;
}

// === Popup Menu ===
function toggleMenu(){ document.getElementById("popupMenu").classList.toggle("active"); }
function setRewardRate(){ alert("‚öôÔ∏è ‡πÉ‡∏ä‡πâ‡πÅ‡∏Ñ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Mock UI (‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° contract)"); }
</script>
</body>
</html>
