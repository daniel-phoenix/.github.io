<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üåæ DNX FARM ULTRA++</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&family=Noto+Sans+Thai:wght@500&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
<style>
:root{
  --gold:#ffd700;
  --neon:#00ffd5;
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{
  height:100%;
  overflow-x:hidden;
  font-family:"Poppins","Noto Sans Thai",sans-serif;
  background:radial-gradient(circle at top,#000 40%,#111 100%);
  color:#fff;
}
header{
  position:fixed;top:0;left:0;right:0;z-index:20;
  display:grid;grid-template-columns:1fr auto 1fr;
  align-items:center;
  padding:10px;
  background:linear-gradient(90deg,#111,#222,#111);
  border-bottom:2px solid var(--gold);
}
#logo{
  height:50px;
  margin-left:20px;
}
main{
  margin-top:100px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
}
h1{
  font-size:2.2em;
  color:var(--gold);
  text-shadow:0 0 10px var(--neon);
  margin-bottom:20px;
}
input{
  padding:12px 15px;
  border:none;
  border-radius:10px;
  width:220px;
  text-align:center;
  font-size:16px;
  margin:10px 0;
  outline:none;
}
button{
  margin:8px;
  padding:12px 25px;
  border:none;
  border-radius:12px;
  font-weight:bold;
  font-size:16px;
  cursor:pointer;
  transition:all .25s;
  text-transform:uppercase;
}
button:hover{transform:scale(1.05)}
.connect{background:var(--neon);color:#000;box-shadow:0 0 15px var(--neon);}
.action{background:var(--gold);color:#000;box-shadow:0 0 15px var(--gold);}
#wallet{margin:15px;font-size:1em;color:var(--gold);}
footer{
  margin-top:80px;
  text-align:center;
  font-size:.85em;
  opacity:.7;
}
.glow-box{
  border:2px solid var(--gold);
  border-radius:20px;
  padding:25px;
  background:rgba(255,215,0,0.05);
  box-shadow:0 0 25px rgba(255,215,0,0.2);
}
</style>
</head>
<body>
<header>
  <img id="logo" src="https://raw.githubusercontent.com/daniel-phoenix/.github.io/main/logo.png" alt="DNX Logo">
  <div style="justify-self:center;font-size:1.3em;color:var(--gold);font-weight:700;">
    DNX FARM ULTRA++
  </div>
</header>

<main>
  <div class="glow-box">
    <h1>üåæ Stake & Earn DNX</h1>
    <p id="wallet">üîå ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° MetaMask</p>
    <button class="connect" onclick="connectWallet()">Connect Wallet</button><br>
    <input id="amount" type="number" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô DNX" min="0"><br>
    <button class="action" onclick="approveDNX()">‚úÖ Approve DNX</button>
    <button class="action" onclick="stakeDNX()">üåæ Stake</button>
    <button class="action" onclick="unstakeDNX()">üí∞ Unstake</button>
  </div>
</main>

<footer>
  <p>¬© 2025 DNX Dynamix Group | Powered by Mr. Daniel Phoenix üá¨üáß</p>
</footer>

<script>
// ---------------- ABI ----------------
const stakingABI = [
  {
    "inputs": [
      {"internalType": "contract IERC20","name": "_dnxToken","type": "address"},
      {"internalType": "address","name": "_treasury","type": "address"},
      {"internalType": "uint256","name": "_rewardRate","type": "uint256"}
    ],
    "stateMutability": "nonpayable","type": "constructor"
  },
  {"inputs":[],"name":"fundReward","outputs":[],"stateMutability":"payable","type":"function"},
  {"inputs":[],"name":"ownerWithdrawAll","outputs":[],"stateMutability":"nonpayable","type":"function"},
  {"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},
  {"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"stake","outputs":[],"stateMutability":"nonpayable","type":"function"},
  {"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"unstake","outputs":[],"stateMutability":"nonpayable","type":"function"},
  {"inputs":[],"name":"updatePool","outputs":[],"stateMutability":"nonpayable","type":"function"},
  {"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},
  {"inputs":[],"name":"rewardRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
  {"inputs":[],"name":"totalStaked","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
  {"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"stakes","outputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"rewardDebt","type":"uint256"}],"stateMutability":"view","type":"function"}
];

// ---------------- MAIN SCRIPT ----------------
const stakingAddress = "0x4CBC7013c8CF3347bbaf577580C9Ec539FE42E00"; // Staking
const dnxAddress = "0x7DB860CC9D7f64Ed1B39de6621ebc94440C8dc62"; // DNX Token

let provider, signer, dnxToken, chef;

async function connectWallet(){
  if(!window.ethereum){
    alert("‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á MetaMask ‡∏Å‡πà‡∏≠‡∏ô");
    return;
  }
  await window.ethereum.request({ method: "eth_requestAccounts" });
  provider = new ethers.providers.Web3Provider(window.ethereum);
  signer = provider.getSigner();
  const addr = await signer.getAddress();
  document.getElementById("wallet").innerText = "‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß: " + addr;

  dnxToken = new ethers.Contract(dnxAddress, [
    "function approve(address spender, uint256 amount) public returns (bool)",
    "function allowance(address owner, address spender) public view returns (uint256)"
  ], signer);

  chef = new ethers.Contract(stakingAddress, stakingABI, signer);
  alert("‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚úÖ");
}

async function approveDNX(){
  if(!signer){alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° MetaMask ‡∏Å‡πà‡∏≠‡∏ô");return;}
  const amount = ethers.utils.parseUnits(document.getElementById("amount").value || "0", 18);
  const tx = await dnxToken.approve(stakingAddress, amount);
  await tx.wait();
  alert("‚úÖ Approve ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!");
}

async function stakeDNX(){
  if(!signer){alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° MetaMask ‡∏Å‡πà‡∏≠‡∏ô");return;}
  const amount = ethers.utils.parseUnits(document.getElementById("amount").value || "0", 18);
  const tx = await chef.stake(amount);
  await tx.wait();
  alert("üåæ Stake ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!");
}

async function unstakeDNX(){
  if(!signer){alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° MetaMask ‡∏Å‡πà‡∏≠‡∏ô");return;}
  const amount = ethers.utils.parseUnits(document.getElementById("amount").value || "0", 18);
  const tx = await chef.unstake(amount);
  await tx.wait();
  alert("üí∞ Unstake ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!");
}
</script>
</body>
</html>
